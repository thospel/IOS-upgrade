#!/opt/Shell/tooling/device-apply/bin/device-apply -A

# Fetch image and Reboot to new IOS

[Include File=prepare.actions.txt]
define: verify
define: reload
define: uptime_exceeded
define: filesystem

define: old_path
define: new_file
define: new_md5
define: valid_image

define: rom_file
define: rom_md5
define: valid_rom

[Include File=reboot.actions.txt]
argument: old_verify = ${verify}
argument: new_verify = 0
argument: reload
argument: uptime_exceeded
argument: filesystem

argument: old_path
argument: new_file
argument: new_md5
argument: have_image_file = 1
argument: valid_image

argument: rom_file
argument: rom_md5
argument: have_rom_file   = 1
argument: valid_rom
